<%@ page import="java.sql.*" language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html>
<html>
<head>
<script src="function.js" type="text/javascript">
function valid(){
    var userid=document.getElementById("userid");
    var userpass=document.getElementById("userpass");
    var username=document.getElementById("username");
    var useradd=document.getElementById("useradd");
    var usergender=document.getElementById("usergender");
    var userphn=document.getElementById("userphn");
    var useremail=document.getElementById("useremail");
    var userdob=document.getElementById("userdob");
    
    if(notEmpty(userid,"Employee ID Should Not Blank")){
    	if(rangeValid(userpass,6,9,"Password Between 6 to 9 Charcters")){
    		if(onlyAlpha(username,"Employee Name Only Contain Alphabets")){
    			if(addrValid(useradd,"Invalid Charcter in Employee Address")){
    				if(onlyDigits(userphn,"Employee Phone Only Digits")){
    					if(emailValid(useremail,"Invalid Employee Email")){
    						return true;
    					}
    				}
    			}
    		}
    	}
    }
    return false;
 }
 
</script>

<meta charset="ISO-8859-1">
<link href="style.css" rel="stylesheet" type="text/css">
<title>Registration Page</title>
</head>
<body>

<%!
	int id = 1;
%>

<%
Class.forName("com.mysql.jdbc.Driver");
Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/sambit_db","root","");	
PreparedStatement ps = con.prepareStatement("SELECT userid FROM user_master");
ResultSet rs = ps.executeQuery();

%>

<br>
<br>
<br>
<br>
	<table>
		<tr>
			<td><div align="center"><h1>Welcome</h1></div>
	<div align="center"><h2> Registration Form.</h2></div>
		<div align="center"><p>Already Have an Account: <a href="Login.jsp"><b>Login Here</b></a></p></div>
		</td>
			<td><form onsubmit="return valid()" action="Regd" method="post" enctype="multipart/form-data">
		<table cellpadding="4">
			<tr>
            <td>User ID</td>
            <%
			while(rs.next()){
				int id1 = rs.getInt(1);
				while(id1 == id){
					id = id+1;
					}
				}%>
            <td><input type="text" id = "userid" name="userid" value="<%out.println(id);%>"></td>
        </tr>
        
        <tr>
            <td>Password:</td>
            <td><input type="password" id = "userpass" name="userpass" placeholder="Enter Password"></td>
        </tr>
        
        <tr>
            <td>User Name:</td>
            <td><input type="text" id = "username" name="username" placeholder="Enter Username" ></td>
        </tr>
        
        <tr>
            <td>User Address:</td>
            <td><textarea id = "useradd" name="useradd" placeholder="Enter Address" rows="3" cols="21"></textarea></td>
        </tr>
        
        <tr>
            <td>User Gender</td>
            <td><input type="radio" id = "usergender" value="Male" name="usergender" checked > Male
                <input type="radio" value="Female" name="usergender"> Female
                <input type="radio" value="Other" name="usergender"> Other</td>
        </tr>
        
        <tr>
            <td>Phone Number:</td>
            <td><input type="number" id="userphn" name="userphn" placeholder="Phone Number" maxlength="10"></td>
        </tr>
        
        <tr>
            <td>Email Address:</td>
            <td><input type="email" id="useremail" name="useremail" placeholder="Enter Email Address"></td>
        </tr>
        
         <tr>
            <td>Date of Birth:</td>
            <td><input type="date" id = "userdob" name="userdob"></td>
        </tr>
        
        <tr>
            <td><label for="img">Select Image:</label></td>
            <td><input type="file" id="img" name="userphoto" accept="image/*"></td>
        </tr>
        
        <tr>
            <td colspan="2"><input type="reset" Value="Reset"><input type="submit" Value="Submit"></td>
        </tr>
		</table></form></td>
		</tr>
	</table>
	<br><br><br><br>
	</body>
</html>